(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{114:function(e,r,t){"use strict";t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return b}));var n=t(0),a=t.n(n);function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=a.a.createContext({}),m=function(e){var r=a.a.useContext(u),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},s=function(e){var r=m(e.components);return a.a.createElement(u.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return a.a.createElement(a.a.Fragment,{},r)}},g=a.a.forwardRef((function(e,r){var t=e.components,n=e.mdxType,l=e.originalType,o=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),s=m(t),g=n,b=s["".concat(o,".").concat(g)]||s[g]||p[g]||l;return t?a.a.createElement(b,i(i({ref:r},u),{},{components:t})):a.a.createElement(b,i({ref:r},u))}));function b(e,r){var t=arguments,n=r&&r.mdxType;if("string"==typeof e||n){var l=t.length,o=new Array(l);o[0]=g;var i={};for(var c in r)hasOwnProperty.call(r,c)&&(i[c]=r[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,o[1]=i;for(var u=2;u<l;u++)o[u]=t[u];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},87:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return o})),t.d(r,"metadata",(function(){return i})),t.d(r,"toc",(function(){return c})),t.d(r,"default",(function(){return m}));var n=t(3),a=t(7),l=(t(0),t(114)),o={title:"Alertmanager\u5b89\u88c5\u4f7f\u7528"},i={unversionedId:"monitor/alertmanager",id:"monitor/alertmanager",isDocsHomePage:!1,title:"Alertmanager\u5b89\u88c5\u4f7f\u7528",description:"---",source:"@site/docs/monitor/alertmanager.md",slug:"/monitor/alertmanager",permalink:"/docs/monitor/alertmanager",version:"current",sidebar:"\u76d1\u63a7",previous:{title:"Prometheus\u5b89\u88c5\u4f7f\u7528",permalink:"/docs/monitor/prometheus"},next:{title:"Grafana\u5b89\u88c5\u4f7f\u7528",permalink:"/docs/monitor/grafana"}},c=[{value:"\u5b89\u88c5Alertmanager",id:"\u5b89\u88c5alertmanager",children:[{value:"\u914d\u7f6ealertmanager.yml",id:"\u914d\u7f6ealertmanageryml",children:[]},{value:"\u5229\u7528supervisord\u6765\u7ba1\u7406alertmanager\u8fdb\u7a0b",id:"\u5229\u7528supervisord\u6765\u7ba1\u7406alertmanager\u8fdb\u7a0b",children:[]}]}],u={toc:c};function m(e){var r=e.components,t=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},u,t,{components:r,mdxType:"MDXLayout"}),Object(l.b)("hr",null),Object(l.b)("h2",{id:"\u5b89\u88c5alertmanager"},"\u5b89\u88c5Alertmanager"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"wget https://github.com/prometheus/alertmanager/releases/download/v0.21.0/alertmanager-0.21.0.linux-amd64.tar.gz\ntar zxvf alertmanager-0.21.0.linux-amd64.tar.gz\nmv alertmanager-0.21.0.linux-amd64 /usr/local/alertmanager\n")),Object(l.b)("h3",{id:"\u914d\u7f6ealertmanageryml"},"\u914d\u7f6ealertmanager.yml"),Object(l.b)("p",null,"\u6839\u636e\u5177\u4f53\u60c5\u51b5\u66f4\u6539"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-vim",metastring:'title="/usr/local/alertmanager/alertmanager.yml"',title:'"/usr/local/alertmanager/alertmanager.yml"'}),"global:\n  resolve_timeout: 10s\n  http_config: {}\n\nroute:\n  group_by: ['alertname']\n  group_wait: 10s\n  group_interval: 10s\n  repeat_interval: 10s\n  receiver: 'web'\nreceivers:\n- name: 'web'\n  webhook_configs:\n  - send_resolved: true\n    http_config: {}\n    url: 'http://172.16.118.1:5000/send'\n#inhibit_rules:\n#  - source_match:\n#      severity: 'critical'\n#    target_match:\n#      severity: 'warning'\n#    equal: ['alertname', 'dev', 'instance']\n")),Object(l.b)("h3",{id:"\u5229\u7528supervisord\u6765\u7ba1\u7406alertmanager\u8fdb\u7a0b"},"\u5229\u7528supervisord\u6765\u7ba1\u7406alertmanager\u8fdb\u7a0b"),Object(l.b)("p",null,"\u6dfb\u52a0/etc/supervisord.d/alertmanager.ini\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-vim",metastring:'title="/etc/supervisord.d/prometheus.ini"',title:'"/etc/supervisord.d/prometheus.ini"'}),"[program:prometheus]\n[program:alertmanager]\ndirectory = /usr/local/alertmanager\ncommand = /usr/local/alertmanager/alertmanager --config.file=/usr/local/alertmanager/alertmanager.yml --web.external-url='http://172.16.118.118:9093'\nautostart = true\nstartretries = 10\nautorestart = true\nredirect_stderr = true\nstdout_logfile = /var/log/alertmanager/alertmanager.log\nstdout_logfile_maxbytes = 50MB\nstdout_logfile_buckups = 20\n")),Object(l.b)("p",null,"\u4ee5\u4e0a\u53c2\u6570\u6307\u5b9a\u5982\u4e0b\uff1a"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"web.external-url: \u7528\u6765\u6307\u5b9aprometheus\u7684\u5916\u90e8\u5730\u5740")),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"mkdir -p /var/log/alertmanager/\nsupervisorctl\n>update\n>start alertmanager\n")))}m.isMDXComponent=!0}}]);